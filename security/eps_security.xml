<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="group_eps_user" model="res.groups">
        <field name="name">EPS: Usuario / Socio</field>
    </record>

    <record id="group_eps_secretary" model="res.groups">
        <field name="name">EPS: Secretario/a</field>
        <field name="implied_ids" eval="[(4, ref('group_eps_user'))]"/>
    </record>

    <record id="group_eps_treasurer" model="res.groups">
        <field name="name">EPS: Tesorero/a</field>
        <field name="implied_ids" eval="[(4, ref('group_eps_secretary'))]"/>
    </record>

    <record id="group_eps_admin" model="res.groups">
        <field name="name">EPS: Presidente / Administrador</field>
        <field name="implied_ids" eval="[(4, ref('group_eps_treasurer'))]"/>
    </record>

    <!-- ========================================
         REGLAS DE ACCESO PARA CAJAS
    ========================================= -->
    <record id="rule_eps_caja_isolation" model="ir.rule">
        <field name="name">Ver solo mis cajas asignadas</field>
        <field name="model_id" ref="model_eps_caja"/>
        <field name="domain_force">[('id', 'in', user.eps_caja_ids.ids)]</field>
        <field name="groups" eval="[(4, ref('group_eps_user')), (4, ref('group_eps_secretary')), (4, ref('group_eps_treasurer'))]"/>
    </record>

    <record id="rule_eps_caja_admin_all" model="ir.rule">
        <field name="name">Admin ve todas las cajas</field>
        <field name="model_id" ref="model_eps_caja"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_eps_admin'))]"/>
    </record>

    <!-- ========================================
         REGLAS DE ACCESO PARA SOCIOS
    ========================================= -->
    <record id="rule_eps_socio_isolation" model="ir.rule">
        <field name="name">Ver solo socios de mis cajas asignadas</field>
        <field name="model_id" ref="model_eps_socio"/>
        <field name="domain_force">[('caja_id', 'in', user.eps_caja_ids.ids)]</field>
        <field name="groups" eval="[(4, ref('group_eps_user')), (4, ref('group_eps_secretary')), (4, ref('group_eps_treasurer'))]"/>
    </record>

    <record id="rule_eps_socio_admin_all" model="ir.rule">
        <field name="name">Admin ve todos los socios</field>
        <field name="model_id" ref="model_eps_socio"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_eps_admin'))]"/>
    </record>

</odoo>